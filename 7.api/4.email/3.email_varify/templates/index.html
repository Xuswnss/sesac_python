<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h2>이메일 검증하기 (유사 회원가입)</h2>
 
    <div>
        <label for="email">이메일:</label>
        <input type="email" id="email">
        <button onclick="sendCode()">인증코드 전송</button>

    </div>
  
    <br>
    <div>
        <label for="code">인증코드 : </label>
        <input type="text" id="code">
        <button onclick="verifyCode()">인증코드 확인</button>
    </div>
    <p id="result" style="color: red;"><!--결과 출력할 곳--></p>

    <script>
        //mission1 : email 주소를 가져다가 서버로 보내기(/send-code)
        //result 에다기 : 메일 전송 성공/실패 여부 출력 (서버에서 받아오기)
        //mission2 : code를 가져가가 서버로 보내기(/verify-code)
        // result 에다가 '검증 코드 맞음 /틀림 여부 출력하기'(서버에서 받아오기)
        
        async function sendCode(){
            console.log('sendCode()실행')
            const email = document.getElementById('email').value
            const response =  await fetch('/send-code', {
                method : 'POST',
                headers : {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({email})
            })
            data =await response.json()
            const result = document.getElementById('result')
            result.innerHTML = data.message
    
        }// end sedCode()

        async function verifyCode(){
            const code = document.getElementById('code').value
            const response = await fetch('/verify-code', {
               method : 'POST',
               headers : {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({code})
            })
            data = await response.json()
            console.log(data)
            const result = document.getElementById('result')
            result.innerHTML = data.message
        


        }// end verifyCode()
    </script>
</body>
</html>